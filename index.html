<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Israel Airways â€“ Support Chat</title>

  <style>
    :root{
      --ia-sky:#0B76FF;
      --ia-sky-2:#44B6FF;
      --ia-bg:#EEF5FF;
      --ia-border:#DFE9F6;
      --ia-green:#0E8A5B;
      --ia-green-2:#0A6B46;
      --muted:#6C7A8B;
      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
    }
    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:var(--font);
      background:#e9edf4;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:22px;
    }

    .phone{
      width:min(430px, 94vw);
      height:min(900px, 94vh);
      background:#0f1115;
      border-radius:40px;
      padding:14px;
      box-shadow:0 34px 90px rgba(0,0,0,.35);
      position:relative;
    }
    .screen{
      height:100%;
      border-radius:30px;
      overflow:hidden;
      background:var(--ia-bg);
      position:relative;
      display:flex;
      flex-direction:column;
    }

    .header{
      padding:18px;
      color:#fff;
      background:linear-gradient(180deg,var(--ia-sky),var(--ia-sky-2));
      font-weight:1000;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .brandMark{
      width:38px;height:38px;border-radius:14px;
      background:rgba(255,255,255,.20);
      border:1px solid rgba(255,255,255,.25);
      display:grid;place-items:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .brandMark svg{ width:30px;height:30px; display:block; }
    .brandText{ line-height:1.05; text-align:center; }
    .brandText .name{ font-size:14px; }
    .brandText .tag{ font-size:11px; opacity:.9; font-weight:900; }

    .statusBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.18);
      font-weight:900;
      font-size:12px;
      color:#fff;
      white-space:nowrap;
    }

    .content{
      padding:18px;
      flex:1;
      overflow:auto;
    }
    .card{
      background:#fff;
      border:1px solid var(--ia-border);
      border-radius:20px;
      padding:16px;
      box-shadow:0 10px 25px rgba(0,0,0,.08);
    }

    .btn{
      margin-top:14px;
      width:100%;
      border:none;
      border-radius:16px;
      padding:12px 14px;
      font-weight:1000;
      cursor:pointer;
      background:linear-gradient(180deg,var(--ia-green),var(--ia-green-2));
      color:#fff;
      font-size:14px;
    }
    .btn:disabled{
      opacity:.55;
      cursor:not-allowed;
    }

    .statusLine{
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }

    /* Overlay */
    .overlay{
      position:absolute;
      inset:0;
      background:rgba(0,0,0,.45);
      display:none;
      z-index:50;
      padding:14px;
    }
    .overlay.show{ display:block; }

    .sheet{
      position:absolute;
      left:14px;
      right:14px;
      top:70px;
      bottom:80px;
      background:#fff;
      border-radius:26px;
      display:flex;
      flex-direction:column;
      overflow:hidden;
      box-shadow:0 30px 80px rgba(0,0,0,.35);
    }

    .topBar{
      padding:14px;
      border-bottom:1px solid var(--ia-border);
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-weight:1000;
      background:rgba(11,118,255,.06);
    }

    .closeBtn{
      border:none;
      background:#fff;
      border:1px solid var(--ia-border);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:1000;
    }

    .chatMount{
      flex:1;
      position:relative;
      min-height:0;
    }
    #webchatContainer{
      position:absolute;
      inset:0;
    }
  </style>
</head>

<body>
  <div class="phone">
    <div class="screen">
      <div class="header">
        <div>11:07</div>

        <div class="brand" title="Israel Airways">
          <div class="brandMark" aria-label="Israel Airways">
            <svg viewBox="0 0 64 64" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 46 C 22 34, 34 30, 54 22" fill="none" stroke="#FFFFFF" stroke-width="5" stroke-linecap="round" opacity=".95"/>
              <path d="M46 22 l8 -3 -4 7" fill="none" stroke="#FFFFFF" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" opacity=".95"/>
              <path d="M18 50 V18" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round"/>
              <path d="M46 50 V18" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" opacity=".92"/>
              <path d="M18 34 H46" stroke="#FFFFFF" stroke-width="6" stroke-linecap="round" opacity=".92"/>
            </svg>
          </div>
          <div class="brandText">
            <div class="name">Israel Airways</div>
            <div class="tag">My Flight â€¢ ×”×˜×™×¡×” ×©×œ×™</div>
          </div>
        </div>

        <div class="statusBadge">ğŸŸ¢ ×©×™×¨×•×ª ×–××™×Ÿ</div>
      </div>

      <div class="content">
        <div class="card">
          <div style="font-weight:1000; font-size:18px; margin-bottom:8px;">×©×œ×•× ×™×•×’×‘ ğŸ‘‹</div>
          ×–×™×”×™× ×• ×©×™× ×•×™ ×‘×œ×•×´×– ×œ×˜×™×¡×” IA 712.<br>
          ××¤×©×¨ ×œ×“×‘×¨ ×¢× × ×¦×™×’/×” ×‘×¦×³××˜.

          <button class="btn" id="openChat" disabled>ğŸ’¬ ×¤×ª×— ×¦×³××˜</button>

          <div class="statusLine" id="libStatus">×˜×•×¢×Ÿ ×¨×›×™×‘ ×¦×³××˜â€¦</div>
        </div>
      </div>

      <div class="overlay" id="chatOverlay" aria-hidden="true">
        <div class="sheet">
          <div class="topBar">
            <div>×¦×³××˜ ×¢× × ×¦×™×’/×” â€¢ Israel Airways</div>
            <button class="closeBtn" id="closeChat">âœ•</button>
          </div>
          <div class="chatMount">
            <div id="webchatContainer"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Put endpoint on window to avoid redeclare errors
    window.IA_WEBCHAT_ENDPOINT =
      "https://endpoint-trial.cognigy.ai/fa17d61a203862b03445bd139a8c2b3589dbd5e0325f8d84d917ddebbfef0bdc";

    const libStatus = document.getElementById("libStatus");
    const openBtn = document.getElementById("openChat");

    function setStatus(t){ libStatus.textContent = t; }

    // Load the official Cognigy webchat bundle (per docs)
    // https://github.com/Cognigy/Webchat/releases/latest/download/webchat.js :contentReference[oaicite:1]{index=1}
    function loadWebchatBundle(){
      return new Promise((resolve, reject) => {
        const s = document.createElement("script");
        s.src = "https://github.com/Cognigy/Webchat/releases/latest/download/webchat.js";
        s.async = true;
        s.onload = () => resolve(true);
        s.onerror = () => reject(new Error("Failed to load webchat.js"));
        document.head.appendChild(s);
      });
    }

    let chatInitialized = false;

    function openChat(){
      document.getElementById("chatOverlay").classList.add("show");

      if (chatInitialized) return;

      if (typeof window.initWebchat !== "function"){
        alert("×¨×›×™×‘ ×”×¦×³××˜ ×œ× × ×˜×¢×Ÿ. ×‘×“×•×§ DevTools â†’ Network ×”×× webchat.js × ×—×¡×/404.");
        return;
      }

      window.initWebchat(window.IA_WEBCHAT_ENDPOINT, {
        open: true,
        container: "#webchatContainer",
        disableDefaultLauncher: true
      });

      chatInitialized = true;
    }

    document.getElementById("openChat").addEventListener("click", openChat);

    document.getElementById("closeChat").addEventListener("click", () => {
      document.getElementById("chatOverlay").classList.remove("show");
    });

    document.getElementById("chatOverlay").addEventListener("click", (e) => {
      if (e.target.id === "chatOverlay") {
        document.getElementById("chatOverlay").classList.remove("show");
      }
    });

    // Boot
    (async () => {
      try{
        setStatus("×˜×•×¢×Ÿ ×¨×›×™×‘ ×¦×³××˜â€¦");
        await loadWebchatBundle();

        if (typeof window.initWebchat === "function"){
          setStatus("×¨×›×™×‘ ×”×¦×³××˜ × ×˜×¢×Ÿ âœ…");
          openBtn.disabled = false;
        } else {
          setStatus("×”×¨×›×™×‘ × ×˜×¢×Ÿ ××‘×œ initWebchat ×œ× ×–××™×Ÿ. ×‘×“×•×§ Console.");
          openBtn.disabled = true;
        }
      } catch (e){
        console.warn(e);
        setStatus("×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ××ª ×¨×›×™×‘ ×”×¦×³××˜. ×‘×“×•×§ DevTools â†’ Network ×œ×—×¡×™××•×ª/404.");
        openBtn.disabled = true;
      }
    })();
  </script>
</body>
</html>
