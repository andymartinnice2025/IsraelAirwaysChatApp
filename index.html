<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Israel Airways â€“ Support Chat</title>

  <!-- Cognigy Webchat UMD build (global initWebchat) -->
  <script src="https://cdn.jsdelivr.net/npm/@cognigy/webchat/dist/webchat.umd.js"></script>

  <style>
    :root{
      --ia-sky:#0B76FF;
      --ia-sky-2:#44B6FF;
      --ia-bg:#EEF5FF;
      --ia-border:#DFE9F6;
      --ia-green:#0E8A5B;
      --ia-green-2:#0A6B46;
      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
    }
    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:var(--font);
      background:#e9edf4;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:22px;
    }

    .phone{
      width:min(430px, 94vw);
      height:min(900px, 94vh);
      background:#0f1115;
      border-radius:40px;
      padding:14px;
      box-shadow:0 34px 90px rgba(0,0,0,.35);
      position:relative;
    }
    .screen{
      height:100%;
      border-radius:30px;
      overflow:hidden;
      background:var(--ia-bg);
      position:relative;
      display:flex;
      flex-direction:column;
    }

    .header{
      padding:18px;
      color:#fff;
      background:linear-gradient(180deg,var(--ia-sky),var(--ia-sky-2));
      font-weight:1000;
    }

    .content{
      padding:18px;
      flex:1;
      overflow:auto;
    }

    .card{
      background:#fff;
      border:1px solid var(--ia-border);
      border-radius:20px;
      padding:16px;
      box-shadow:0 10px 25px rgba(0,0,0,.08);
    }

    .btn{
      margin-top:14px;
      width:100%;
      border:none;
      border-radius:16px;
      padding:12px 14px;
      font-weight:1000;
      cursor:pointer;
      background:linear-gradient(180deg,var(--ia-green),var(--ia-green-2));
      color:#fff;
      font-size:14px;
    }

    /* Overlay */
    .overlay{
      position:absolute;
      inset:0;
      background:rgba(0,0,0,.45);
      display:none;
      z-index:50;
      padding:14px;
    }
    .overlay.show{ display:block; }

    .sheet{
      position:absolute;
      left:14px;
      right:14px;
      top:70px;
      bottom:80px;
      background:#fff;
      border-radius:26px;
      display:flex;
      flex-direction:column;
      overflow:hidden;
      box-shadow:0 30px 80px rgba(0,0,0,.35);
    }

    .topBar{
      padding:14px;
      border-bottom:1px solid var(--ia-border);
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-weight:1000;
      background:rgba(11,118,255,.06);
    }

    .closeBtn{
      border:none;
      background:#fff;
      border:1px solid var(--ia-border);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:1000;
    }

    .chatMount{
      flex:1;
      position:relative;
      min-height:0;
    }

    #webchatContainer{
      position:absolute;
      inset:0;
    }
  </style>
</head>

<body>
  <!-- SINGLE mock app (only one .phone on the page) -->
  <div class="phone">
    <div class="screen">
      <div class="header">Israel Airways â€¢ My Flight</div>

      <div class="content">
        <div class="card">
          ×©×œ×•× ×™×•×’×‘ ğŸ‘‹<br><br>
          ×–×™×”×™× ×• ×©×™× ×•×™ ×‘×œ×•×´×– ×œ×˜×™×¡×” IA 712.<br>
          ××¤×©×¨ ×œ×“×‘×¨ ×¢× × ×¦×™×’/×” ×‘×¦×³××˜.
          <button class="btn" id="openChat">ğŸ’¬ ×¤×ª×— ×¦×³××˜</button>
          <div style="margin-top:10px;font-size:12px;color:#6C7A8B;">
            ×× ×”×›×¤×ª×•×¨ ×œ× ×¢×•×‘×“, ×¤×ª×— Console ×•×•×“× ×©Ö¾<code>typeof initWebchat</code> ×”×•× <code>"function"</code>.
          </div>
        </div>
      </div>

      <div class="overlay" id="chatOverlay" aria-hidden="true">
        <div class="sheet">
          <div class="topBar">
            <div>×¦×³××˜ ×¢× × ×¦×™×’/×” â€¢ Israel Airways</div>
            <button class="closeBtn" id="closeChat">âœ•</button>
          </div>
          <div class="chatMount">
            <div id="webchatContainer"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Guard: prevent accidental double-run if the page is included twice somewhere.
    if (!window.__IA_CHAT_BOOTSTRAPPED__) {
      window.__IA_CHAT_BOOTSTRAPPED__ = true;

      // Put endpoint on window to avoid "already declared" errors.
      window.IA_WEBCHAT_ENDPOINT =
        "https://endpoint-trial.cognigy.ai/fa17d61a203862b03445bd139a8c2b3589dbd5e0325f8d84d917ddebbfef0bdc";

      let chatInitialized = false;

      function openChat(){
        document.getElementById("chatOverlay").classList.add("show");

        if (chatInitialized) return;

        if (typeof window.initWebchat !== "function") {
          console.error("initWebchat is not defined. Webchat script may not have loaded.");
          alert("Webchat script didn't load. Check DevTools Console.");
          return;
        }

        window.initWebchat(window.IA_WEBCHAT_ENDPOINT, {
          open: true,
          container: "#webchatContainer",
          rootElement: document.getElementById("webchatContainer"),
          disableDefaultLauncher: true
        });

        chatInitialized = true;
      }

      document.getElementById("openChat").addEventListener("click", openChat);
      document.getElementById("closeChat").addEventListener("click", () => {
        document.getElementById("chatOverlay").classList.remove("show");
      });

      // Close on background click
      document.getElementById("chatOverlay").addEventListener("click", (e) => {
        if (e.target.id === "chatOverlay") {
          document.getElementById("chatOverlay").classList.remove("show");
        }
      });
    }
  </script>
</body>
</html>
